<!DOCTYPE html>
<html
	dir="ltr"
	lang="ru-RU">
	
	
	
		<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Сертификаты для localhost -  Let&#39;s Encrypt</title>
    <meta name="description" content="Иногда разработчикам нужен сертификат для доменного имени &amp;ldquo;localhost&amp;rdquo; - для локальной разработки, или для распространения внутри нативных приложений для взаимодействия с web-приложением. Let&amp;rsquo;s Encrypt не предоставляет сертификатов для &amp;ldquo;localhost&amp;rdquo;, т.к. во-первых, у этого доменного имени нет определённого владельца, и во-вторых, нет домена первого уровня - например, &amp;ldquo;.com&amp;rdquo; или &amp;ldquo;.net&amp;rdquo;. Теоретически, возможно настроить доменное имя так, чтобы оно указывало на адрес 127.0.0.1, и выпустить для него сертификат после прохождения проверки DNS. Тем не менее, есть более удачные решения.">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@letsencrypt">
    <meta name="twitter:title" content="Сертификаты для localhost">
    <meta name="twitter:url" content="https://qubitpi.github.io/letsencrypt-ewebsite/ru/docs/certificates-for-localhost/">
    <meta name="twitter:description" content="Иногда разработчикам нужен сертификат для доменного имени &amp;ldquo;localhost&amp;rdquo; - для локальной разработки, или для распространения внутри нативных приложений для взаимодействия с web-приложением. Let&amp;rsquo;s Encrypt не предоставляет сертификатов для &amp;ldquo;localhost&amp;rdquo;, т.к. во-первых, у этого доменного имени нет определённого владельца, и во-вторых, нет домена первого уровня - например, &amp;ldquo;.com&amp;rdquo; или &amp;ldquo;.net&amp;rdquo;. Теоретически, возможно настроить доменное имя так, чтобы оно указывало на адрес 127.0.0.1, и выпустить для него сертификат после прохождения проверки DNS. Тем не менее, есть более удачные решения.">
    <meta name="twitter:image:src" content="https://qubitpi.github.io/letsencrypt-ewebsite/images/le-logo-twitter-noalpha.png">
    <meta name="og:image" content="https://qubitpi.github.io/letsencrypt-ewebsite/images/LetsEncrypt-SocialShare.png">

    
    <link rel="stylesheet" href="/letsencrypt-ewebsite/css/main.min.6791249091d19b45fdcb90a60bdc1d673e0fa8014336e38e91d9017427824807933b14f5d5af8403308998662afcdf07b5be942bb9087d7cfbfdb5da709822a5.css" integrity="sha512-Z5EkkJHRm0X9y5CmC9wdZz4PqAFDNuOOkdkBdCeCSAeTOxT11a&#43;EAzCJmGYq/N8Htb6UK7kIfXz7/bXacJgipQ==">

    <link rel="stylesheet" href="/fontawesome-free-5.12.1-web/css/all.min.css" />
    
    <link rel="canonical" href="/letsencrypt-ewebsite/ru/docs/certificates-for-localhost/">
    
    <link rel="alternate" href="/feed.xml" type="application/rss+xml" title="Блог Let&#39;s Encrypt" />
    
    
</head>

	
	<body>
		
<header class="site-header">
  <a id="skiplink" href="#main-content">Пропустить навигационные ссылки</a>
  <div class="wrapper">
    <a class="site-title" href="/letsencrypt-ewebsite/ru/"><img src="/images/letsencrypt-logo-horizontal.svg" alt="Let's Encrypt"></a>

    <span id="menuIcon">
      <i class="fas fa-bars"></i>
    </span>
    <nav class="site-nav" id="menu">
      <div class="pure-menu pure-menu-horizontal custom-can-transform">
        <ul class="pure-menu-list">
          
          <li class="pure-menu-item">
            <a href="/letsencrypt-ewebsite/ru/docs/" class="pure-menu-link" tabindex="0">Документация</a>
            
          </li>
          
          <li class="pure-menu-item">
            <a href="https://community.letsencrypt.org/" class="pure-menu-link" tabindex="0">Помощь</a>
            
          </li>
          
          <li class="pure-menu-item pure-menu-has-children">
            <a href="#" class="pure-menu-link" tabindex="0">Поддержите нас</a>
            
            <ul class="pure-menu-children">
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ru/donate/" class="pure-menu-link">Сделайте пожертвование</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="https://www.abetterinternet.org/sponsor/" class="pure-menu-link">Станьте нашим спонсором</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ru/sponsors/" class="pure-menu-link">Текущие спонсоры и дарители</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ru/getinvolved/" class="pure-menu-link">Внесите свой вклад</a>
              </li>
              
            </ul>
            
          </li>
          
          <li class="pure-menu-item pure-menu-has-children">
            <a href="#" class="pure-menu-link" tabindex="0">О сервисе</a>
            
            <ul class="pure-menu-children">
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ru/about/" class="pure-menu-link">Что такое Let&#39;s Encrypt</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="https://www.abetterinternet.org/about/" class="pure-menu-link">Internet Security Research Group (ISRG)</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ru/docs/dst-root-ca-x3-expiration-september-2021/" class="pure-menu-link">Окончание срока действия DST Root CA X3 (сентябрь 2021 г.)</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ru/docs/faq/" class="pure-menu-link">Часто задаваемые вопросы (ЧЗВ)</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="https://letsencrypt.status.io/" class="pure-menu-link">Состояние сервиса</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ru/stats/" class="pure-menu-link">Статистика</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="https://www.abetterinternet.org/careers/" class="pure-menu-link">Карьера</a>
              </li>
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ru/contact/" class="pure-menu-link">Контакты</a>
              </li>
              
            </ul>
            
          </li>
          
          
          
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
          
          <li class="pure-menu-item pure-menu-has-children">
            <a href="#" class="pure-menu-link" tabindex="0">Язык <img src="/images/language-icon128px-black.png" class="inline-icon" alt="" aria-hidden="true"></a>
            <ul class="pure-menu-children menu-for-languages">
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/docs/certificates-for-localhost/" lang="en-US" hreflang="en-US" class="pure-menu-link">English</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/da/docs/certificates-for-localhost/" lang="da" hreflang="da" class="pure-menu-link">Dansk</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/de/docs/certificates-for-localhost/" lang="de-DE" hreflang="de-DE" class="pure-menu-link">Deutsch</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/es/docs/certificates-for-localhost/" lang="es-US" hreflang="es-US" class="pure-menu-link">Español</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/fi/docs/certificates-for-localhost/" lang="fi" hreflang="fi" class="pure-menu-link">Suomi</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/fr/docs/certificates-for-localhost/" lang="fr-FR" hreflang="fr-FR" class="pure-menu-link">Français</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/he/docs/certificates-for-localhost/" lang="he" hreflang="he" class="pure-menu-link">עברית</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/hu/docs/certificates-for-localhost/" lang="hu" hreflang="hu" class="pure-menu-link">Hungarian</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/id/docs/certificates-for-localhost/" lang="id-ID" hreflang="id-ID" class="pure-menu-link">Bahasa Indonesia</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/it/docs/certificates-for-localhost/" lang="it-IT" hreflang="it-IT" class="pure-menu-link">Italiano</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ja/docs/certificates-for-localhost/" lang="ja" hreflang="ja" class="pure-menu-link">日本語</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ko/docs/certificates-for-localhost/" lang="ko-KR" hreflang="ko-KR" class="pure-menu-link">한국어</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/pt-br/docs/certificates-for-localhost/" lang="pt-BR" hreflang="pt-BR" class="pure-menu-link">Português do Brasil</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/ru/docs/certificates-for-localhost/" lang="ru-RU" hreflang="ru-RU" class="pure-menu-link">✓ Русский</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/si/docs/certificates-for-localhost/" lang="si" hreflang="si" class="pure-menu-link">සිංහල</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/sr/docs/certificates-for-localhost/" lang="sr" hreflang="sr" class="pure-menu-link">Srpski</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/sv/docs/certificates-for-localhost/" lang="sv" hreflang="sv" class="pure-menu-link">Svenska</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/uk/docs/certificates-for-localhost/" lang="uk-UA" hreflang="uk-UA" class="pure-menu-link">Українська</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/vi/docs/certificates-for-localhost/" lang="vi-VN" hreflang="vi-VN" class="pure-menu-link">Tiếng Việt</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/zh-cn/docs/certificates-for-localhost/" lang="zh-Hans-CN" hreflang="zh-Hans-CN" class="pure-menu-link">简体中文</a>
              </li>
              
              
              <li class="pure-menu-item">
                <a href="/letsencrypt-ewebsite/zh-tw/docs/certificates-for-localhost/" lang="zh-Hant-TW" hreflang="zh-Hant-TW" class="pure-menu-link">繁體中文</a>
              </li>
              
            </ul>
          </li>
          
        </ul>
      </div>
    </nav>
  </div>
</header>
<div id="site-banner">
  <a href="https://abetterinternet.org/tenth-anniversary">ISRG celebrates 10 years of helping build a brighter Internet →</a>
</div>
<div id="main-content"></div>


		

<div class="hero slim" style="background-image: url('/letsencrypt-ewebsite/images/1.jpg');">
<div class="container">
	<h1>Сертификаты для localhost</h1>
</div>
</div>

<div class="page-content">
	<div class="wrapper">



<script src="/js/i18n.js" defer async></script>



<p>

    
    Последнее обновление: <time datetime="2017-12-21">21 дек. 2017 г.</time>


 | <a href="/letsencrypt-ewebsite/ru/docs">Вся документация</a>
</p>





    
        
               
            
        
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    



<p>Иногда разработчикам нужен сертификат для доменного имени &ldquo;localhost&rdquo; - для локальной разработки, или для распространения внутри нативных приложений для взаимодействия с web-приложением. Let&rsquo;s Encrypt не предоставляет сертификатов для &ldquo;localhost&rdquo;, т.к. во-первых, у этого доменного имени нет определённого владельца, и во-вторых, нет домена первого уровня - например, &ldquo;.com&rdquo; или &ldquo;.net&rdquo;. Теоретически, возможно настроить доменное имя так, чтобы оно указывало на адрес <code>127.0.0.1</code>, и выпустить для него сертификат после прохождения проверки DNS. Тем не менее, есть более удачные решения. Тем не менее, есть более удачные решения.</p>
<h1 id="для-локальной-разработки">Для локальной разработки</h1>
<p>При разработке web-приложения обычно запускают локальный web-сервер (Apache, Nginx), настроенный на <code>http://localhost:8000/</code>. Однако, браузеры по-разному обрабатывают HTTP- и HTTPS-запросы. На HTTPS-странице попытка загрузить Javascript по HTTP-протоколу будет заблокирована. Поэтому, при локальной разработке, используя HTTP, скрипты будут загружаться нормально, но после выкладки на рабочие HTTPS-серверы возникнут проблемы. Чтобы избежать такой ситуации, нужно настроить доступ по HTTPS на локальном web-сервере. Но как избавиться от постоянных сообщений об ошибке сертификата? Как увидеть &ldquo;зелёный замОк&rdquo; в адресной строке?</p>
<p>Лучшим решением будет создание собственного сертификата - самоподписанного, или подписанного локальным корневым сертификатом. После создания сертификата - просто добавьте его в доверенное хранилище операционной системы. Подробности см.ниже.</p>
<h1 id="для-нативных-приложений-взаимодействующих-с-web-приложениями">Для нативных приложений, взаимодействующих с web-приложениями</h1>
<p>Время от времени, разработчики вынуждены выпускать загружаемые нативные приложения, для расширения функциональности и совместного использования с web-приложениями. Например, десктоп-приложения Dropbox и Spotify умеют сканировать файлы на дисках компьютера, что невозможно для web-приложений. Общий подход в реализации таких нативных приложений состоит в запуске локального web-сервера, и обмену данными с web-приложением через XMLHTTPRequest (XHR) или WebSockets. Web-приложения, как правило, используют HTTPS, поэтому XHR- или WebSockets-запросы по небезопасному протоколу HTTP будут отклонены. Это называется &ldquo;блокировка смешаного контента&rdquo; (Mixed Content Blocking). Для взаимодействия с web-приложением, нативное приложение должно быть безопасным.</p>
<p>С одной стороны, современные браузеры  <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=607878">считают</a> <code>http://127.0.0.1:8000/</code> <a href="https://www.w3.org/TR/secure-contexts/#is-origin-trustworthy">&ldquo;потенциально заслуживающим доверие&rdquo;</a> URL-ом, потому что он локальный. Отправленный на <code>127.0.0.1</code> трафик гарантированно не уйдёт за пределы компьютера, соответственно, считается безопасным для перехвата по сети. Это означает, что если web-приложение использует HTTPS, а нативное приложение запущено на <code>127.0.0.1</code>, то обе программы могут успешно взаимодействовать по XHR. С другой стороны, <a href="https://tools.ietf.org/html/draft-ietf-dnsop-let-localhost-be-localhost-02">для localhost это ещё не работает</a>. А WebSocket-ы игнорируют и <code>127.0.0.1</code>, и <code>localhost</code>.</p>
<p>Возможно, вы захотите обойти эти ограничения, настроив указание произвольного доменного имени в глобальном DNS на адрес <code>127.0.0.1</code> (например, <code>localhost.example.com</code>), выпустив сертификат для этого домена, распространяя сертификат и соответствующий ему закрытый ключ внутри нативного приложения, и настроив взаимодействие по <code>https://localhost.example.com:8000/</code> вместо <code>http://127.0.0.1:8000/</code>. <em>Не делайте этого!</em> Это подвергнет пользователей риску, и сертификат может быть отозван.</p>
<p>Используя доменное имя вместо IP-адреса, вы позволяете злоумышленникам запустить атаку Man in the Middle (MitM) в процессе поиска IP-адреса по доменному имени (DNS Lookup), и внедрить ответ, который укажет на другой IP-адрес. Атакующий может притвориться нативным приложением, подделывая запросы к web-приложению, что скомпрометирует аккаунт в web-приложении.</p>
<p>Успех атаки MitM возможен потому, что вы вынуждены распространять закрытый ключ для сертификата вместе с нативным приложением. Соответственно, любой, кто скачает это приложение, получит копию ключа. Этим вы скомпрометируете закрытый ключ, и Удостоверяющий Центр (УЦ) отзовёт сертификат, как только узнает об этом. У <a href="https://groups.google.com/d/msg/mozilla.dev.security.policy/eV89JXcsBC0/wsj5zpbbAQAJ">множества нативных приложений</a> были отозваны <a href="https://groups.google.com/d/msg/mozilla.dev.security.policy/T6emeoE-lCU/-k-A2dEdAQAJ">их сертификаты</a> из-за <a href="https://groups.google.com/d/msg/mozilla.dev.security.policy/pk039T_wPrI/tGnFDFTnCQAJ">распространения закрытого ключа</a>.</p>
<p>К сожалению, это сужает список безопасных способов взаимодействия нативных и web-приложений. И ситуация может ещё больше усложниться в недалёком будущем, если браузеры продолжат <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=378566">затруднять доступ к localhost</a>.</p>
<p>Так же нужно отметить, что web-сервисы с доступом к нативному API изначально небезопасны, потому что сайты, которые вы не намеревались авторизовать, могут получить доступ к этому API. Если решите углубиться в изучение проблемы, обратите внимание на <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">Cross-Origin Resource Sharing</a>, использование заголовка ответа Access-Control-Allow-Origin, и надёжного HTTP-парсера. Потому как даже серверы, не прошедшие подтверждение, могут посылать предварительные запросы, эксплуатирующие уязвимости в HTTP-парсере.</p>
<h1 id="создание-и-поверка-собственных-сертификатов">Создание и поверка собственных сертификатов</h1>
<p>Любой может выпустить собственный сертификат без обращения к ЦС. Единственное различие будет в том, что выпущенные вами сертификаты не будут приниматься кем-либо ещё. Для локальной разработки этого достаточно.</p>
<p>Простейший способ сгенерировать закрытый ключ и самоподписанный сертификат для localhost - выполнить следующую команду из пакета openssl:</p>
<pre><code>openssl req -x509 -out localhost.crt -keyout localhost.key \
  -newkey rsa:2048 -nodes -sha256 \
  -subj '/CN=localhost' -extensions EXT -config &lt;( \
   printf &quot;[dn]\nCN=localhost\n[req]\ndistinguished_name = dn\n[EXT]\nsubjectAltName=DNS:localhost\nkeyUsage=digitalSignature\nextendedKeyUsage=serverAuth&quot;)
</code></pre>
<p>Вы можете сконфигурировать локальный web-сервер, используя файлы localhost.crt и localhost.key, добавив localhost.crt в список доверенных корневых сертификатов.</p>
<p>Если вам требуется чуть больше реализма в сертификатах для локальной разработки, попробуйте <a href="https://github.com/jsha/minica">minica</a> для создания собственного корневого сертификата, и выпуска конечных сертификатов, подписанных корневым. В итоге вы будете импортировать корневой сертификат вместо самоподписанных конечных сертификатов.</p>
<p>Также, вы можете использовать доменное имя с точками внутри (например, <code>www.localhost</code>), добавив в файл /etc/hosts как алиас адреса <code>127.0.0.1</code>. Этот подход чуть изменит способ обработки браузерами хранилища для cookie.</p>
</div>
</div>
		


<footer class="site-footer">

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-2">
        <p>  Let's Encrypt - это бесплатный, автоматизированный и открытый Центр Сертификации, созданный для вас
  некоммерческой организацией <a href="https://www.abetterinternet.org/">Internet Security Research Group (ISRG)</a>.
</p>
        <p>
          <span itemscope itemtype="http://schema.org/PostalAddress">
            <span itemprop="streetAddress">548 Market St, PMB 77519</span>,
            <span itemprop="addressLocality">San Francisco</span>,
            <span itemprop="addressRegion">CA</span>
            <span itemprop="postalCode">94104-5401</span>,
            <span itemprop="addressCountry">USA</span>
          </span>
        </p>
        <p>Все письма и запросы отправляйте по адресу:</p>
        <p>
          <span itemscope itemtype="http://schema.org/PostalAddress">
            <span itemprop="streetAddress">PO Box 18666</span>,
            <span itemprop="addressLocality">Minneapolis</span>,
            <span itemprop="addressRegion">MN</span>
            <span itemprop="postalCode">55418-0666</span>,
            <span itemprop="addressCountry">USA</span>
          </span>
        </p>
      </div>

      <div class="footer-col  footer-col-1">
        <ul class="social-media-list">
          
          <li>
            <i class="fab fa-github" aria-hidden="true"></i>
            <a href="https://github.com/letsencrypt">
              <span class="username">GitHub</span>
            </a>
          </li>
          

          
          <li>
            <i class="fab fa-twitter" aria-hidden="true"></i>
            <a href="https://twitter.com/letsencrypt">
              <span class="username">Twitter</span>
            </a>
          </li>
         
          
          <li>
            <i class="fab fa-mastodon" aria-hidden="true"></i>
            <a rel="me" href="https://infosec.exchange/@letsencrypt">
              <span class="username">Mastodon</span>
            </a>
          </li>
         
        </ul>
        Ознакомьтесь с нашей <a href="/ru/privacy/">политикой конфиденциальности</a>.<br>
Ознакомьтесь с нашей <a href="https://www.abetterinternet.org/trademarks/">политикой в отношении товарных знаков</a>.

      </div>

      <div class="footer-col footer-newsletter-col  footer-col-3">
        <h6>Subscribe to our Newsletter</h6>
        <iframe src="https://outreach.abetterinternet.org/l/1011011/2023-02-16/6l51" height="200" style="width: 100%; border: 0"></iframe>
      </div>
    </div>

  </div>

</footer>



<script src="/letsencrypt-ewebsite/js/main.9c0b9add2dc0db21de0f695103830dbde01e31d77fa9a2db9ac3c1b9e09e4806f2e0d9a7281b06461b2e162a3560c605b038169b42ff376b4cd28cc71203c8f0.js" integrity="sha512-nAua3S3A2yHeD2lRA4MNveAeMdd/qaLbmsPBueCeSAby4NmnKBsGRhsuFio1YMYFsDgWm0L/N2tM0ozHEgPI8A=="></script>

	</body>
</html>
